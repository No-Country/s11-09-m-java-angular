<form [formGroup]="registerForm" (ngSubmit)="register()">
  <section class="form-login m-auto">
    <div class="mb-1">
      <label class="form-label" for="firstname">Nombre</label>
      <input class="form-control" id="firstname" formControlName="firstname" placeholder="Ingresá su nombre"
             type="text">
      <div *ngIf="registerForm.get('firstname')?.hasError('required') && registerForm.get('firstname')?.touched"
           class="alert alert-danger">
        El nombre es obligatorio.
      </div>
    </div>
    <div class="mb-1">
      <label class="form-label" for="lastname">Apellido</label>
      <input class="form-control" id="lastname" formControlName="lastname" placeholder="Ingresá su nombre" type="email">
      <div *ngIf="registerForm.get('lastname')?.hasError('required') && registerForm.get('lastname')?.touched"
           class="alert alert-danger">
        El apellido es obligatorio.
      </div>
    </div>
    <div class="mb-1">
      <label class="form-label" for="username">Username</label>
      <input class="form-control" id="username" formControlName="username" placeholder="Ingresá su nombre" type="email">
      <div *ngIf="registerForm.get('username')?.hasError('required') && registerForm.get('username')?.touched"
           class="alert alert-danger">
        El username es obligatorio.
      </div>
    </div>
    <div class="mb-1">
      <label class="form-label" for="password">Contraseña</label>
      <input class="form-control" id="password" formControlName="password" placeholder="Ingresá su email"
             type="password">
      <div *ngIf="registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched"
           class="alert alert-danger">
        La contraseña es obligatoria.
      </div>
    </div>
    <div class="mb-1">
      <label class="form-label" for="password-confirm">Confirma tu contraseña</label>
      <input class="form-control" id="password-confirm" formControlName="passwordConfirm"
             placeholder="Ingresá su contraseña" type="password">
      <div
        *ngIf="registerForm.get('passwordConfirm')?.hasError('required') && registerForm.get('passwordConfirm')?.touched"
        class="alert alert-danger">
        La confirmación de la contraseña es obligatoria.
      </div>
      <div *ngIf="registerForm.hasError('passwordMismatch')" class="alert alert-danger">
        Las contraseñas no coinciden.
      </div>
    </div>

    <ng-template #spinnerTemplate>
      <div class="d-flex justify-content-center">
        <div class="spinner-border"></div>
      </div>
    </ng-template>
    <ng-template #buttonTemplate>
      <button type="submit" class="my-5 btn w-100 btn-primary" [disabled]="!registerForm.valid">Guardar</button>
    </ng-template>

    <ng-container *ngIf="(isLoading$ | async); else buttonTemplate">
      <ng-container *ngTemplateOutlet="spinnerTemplate"></ng-container>
    </ng-container>
  </section>
</form>
